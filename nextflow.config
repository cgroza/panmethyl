manifest.defaultBranch = 'main'
apptainer.enabled = true
apptainer.autoMounts = true
apptainer.runOptions = '--contain --bind $(pwd):/tmp'
nextflow.enable.moduleBinaries = true

profiles {
    standard {
        process.executor = 'local'
    }

    cluster {
        process.executor = 'slurm'
        process.scratch = '$SLURM_TMPDIR'
    }

    cloud {
        process.executor = 'aws'
    }
}

process {
    withName: 'bamtags_to_bed' {
        cpus = 2
        memory = 50.GB
        time = 6.h
        }
    withName: 'methylation_to_csv' {
        cpus = 1
        memory = 60.GB
        time = 6.h
        publishDir {
          enabled = false
              }
        }
    withName: 'merge_csv' {
        cpus = 1
        memory = 60.GB
        time = 6.h
    }
    withName: 'align_minigraph' {
        cpus = params.cpus
        memory = params.memory
        time = params.time
    }
    withName: 'align_graphaligner' {
        cpus = params.cpus
        memory = params.memory
        time = params.time
    }
    withName: 'index_graph' {
        cpus = 1
        memory = 40.GB
        time = 6.h
    }
    withName: 'annotate_vcf' {
        cpus = 1
        memory = 40.GB
        time = 6.h
    }
}
